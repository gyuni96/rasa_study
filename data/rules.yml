version: '2.0'

rules:
  # fallback
  - rule: fallback
    steps:
      - intent: nlu_fallback
      - action: action_default_fallback

  - rule: general reservation
    steps:
      - intent: int00001
      - action: utter_ask_Service

  - rule: accompany reservation with user selection
    condition:
      - slot_was_set:
          - userSysId
    steps:
      - intent: int00002
      - action: action_token_verification_for_service
      - action: action_set_user_info
      - active_loop: int00002_form

  - rule: accompany reservation without user selection
    condition:
      - slot_was_set:
          - userSysId: null
    steps:
      - intent: int00002
      - action: action_token_verification_for_service
      - active_loop: int00002_form

  # 서비스 요청 시작
  #  - rule: int00001
  #    steps:
  #      - intent: int00001
  #      - action: int00001_form
  #      - active_loop: null

  # 동행 서비스 요청 시작
  # - rule: int00002
  #   steps:
  #     - intent: int00002
  #     - action: int00002_form
  #     - active_loop: null
  #     # - action: utter_int00002_message
  #     - action: action_reserve

  # 돌봄 서비스 요청 시작
  # - rule: int00003
  #   steps:
  #     - intent: int00003
  #     - action: int00003_form
  #     - active_loop: null
  #     # - action: utter_int00003_message
  #     - action: action_reserve
  - rule: int00004
    steps:
      - intent: int00004
      - action: action_int00004
  - rule: int00005
    steps:
      - intent: int00005
      - action: action_int00004
  - rule: int00006
    steps:
      - intent: int00006
      - action: action_int00004
  - rule: int00007
    steps:
      - intent: int00007
      - action: action_int00004
  - rule: int00008
    steps:
      - intent: int00008
      - action: action_int00004
  - rule: int00009
    steps:
      - intent: int00009
      - action: action_int00004
  - rule: int00010
    steps:
      - intent: int00010
      - action: action_int00004
  - rule: int00011
    steps:
      - intent: int00011
      - action: action_int00004
  - rule: int00012
    steps:
      - intent: int00012
      - action: action_int00004
  - rule: int00013
    steps:
      - intent: int00013
      - action: action_int00004
  - rule: int00014
    steps:
      - intent: int00014
      - action: action_int00004
  - rule: int00015
    steps:
      - intent: int00015
      - action: action_int00004
  - rule: int00016
    steps:
      - intent: int00016
      - action: action_int00004
  - rule: int00017
    steps:
      - intent: int00017
      - action: action_int00004
